# 2mqjs Components ‚Äî –õ–µ–Ω–∏–≤–∞—è –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è UI

–ö–æ–º–ø–æ–Ω–µ–Ω—Ç—ã –≤ **2mqjs** ‚Äî —ç—Ç–æ –∏–∑–æ–ª–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –º–æ–¥—É–ª–∏ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞, –∫–æ—Ç–æ—Ä—ã–µ –ø–æ–¥–∫–ª—é—á–∞—é—Ç—Å—è –∏ –∑–∞–ø—É—Å–∫–∞—é—Ç—Å—è **—Ç–æ–ª—å–∫–æ —Ç–æ–≥–¥–∞**, –∫–æ–≥–¥–∞ –æ–Ω–∏ —Ä–µ–∞–ª—å–Ω–æ –Ω—É–∂–Ω—ã. –≠—Ç–æ –ø–æ–º–æ–≥–∞–µ—Ç —Å–æ–∫—Ä–∞—Ç–∏—Ç—å –≤—Ä–µ–º—è –ø–µ—Ä–≤–∏—á–Ω–æ–π –∑–∞–≥—Ä—É–∑–∫–∏ –∏ –æ–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞—Ç—å —Ä–∞–±–æ—Ç—É —Å DOM.

---

## üîç –ö–ª—é—á–µ–≤—ã–µ –ø—Ä–∏–Ω—Ü–∏–ø—ã

1. **–Ø–≤–Ω–∞—è —Ç–æ—á–∫–∞ –≤—Ö–æ–¥–∞** ‚Äî –ª—é–±–æ–π DOM-—ç–ª–µ–º–µ–Ω—Ç —Å –∞—Ç—Ä–∏–±—É—Ç–æ–º `data-component="name"` —Ä–∞—Å—Å–º–∞—Ç—Ä–∏–≤–∞–µ—Ç—Å—è –∫–∞–∫ —Ç–æ—á–∫–∞ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏.
2. **–†–∞–∑–¥–µ–ª–µ–Ω–∏–µ –æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ—Å—Ç–∏** ‚Äî —É –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞ –º–æ–≥—É—Ç –±—ã—Ç—å –¥–≤–µ —Å—Ç–∞–¥–∏–∏:

   * `display` ‚Äî –±—ã—Å—Ç—Ä—ã–π —Ä–µ–Ω–¥–µ—Ä (—à–∞–±–ª–æ–Ω, –ª—ë–≥–∫–∏–µ –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∏).
   * `boot` ‚Äî —Ç—è–∂—ë–ª–∞—è –ª–æ–≥–∏–∫–∞ (–ø–æ–¥–ø–∏—Å–∫–∏, –∑–∞–ø—Ä–æ—Å—ã, —Å–ª–æ–∂–Ω—ã–µ UI).
3. **–õ–µ–Ω–∏–≤–∞—è –∑–∞–≥—Ä—É–∑–∫–∞** ‚Äî –º–æ–¥—É–ª—å –ø–æ–¥–≥—Ä—É–∂–∞–µ—Ç—Å—è –ø–æ —Å—Ç—Ä–∞—Ç–µ–≥–∏–∏ `immediate`, `visible` –∏–ª–∏ `interaction`.
4. **–ì–∞—Ä–∞–Ω—Ç–∏—è –æ–¥–Ω–æ–∫—Ä–∞—Ç–Ω–æ–≥–æ –∑–∞–ø—É—Å–∫–∞** ‚Äî –∫–æ–º–ø–æ–Ω–µ–Ω—Ç –Ω–µ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä—É–µ—Ç—Å—è –¥–≤–∞–∂–¥—ã.

---

## üìä API

| –ú–µ—Ç–æ–¥                | –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ                                              | –°–∏–≥–Ω–∞—Ç—É—Ä–∞                                      |
| -------------------- | ------------------------------------------------------- | ---------------------------------------------- |
| `registerComponent`  | –†–µ–≥–∏—Å—Ç—Ä–∏—Ä—É–µ—Ç –∫–æ–º–ø–æ–Ω–µ–Ω—Ç                                  | `({ name, load, when?, hasDisplay? }) => void` |
| `runComponentLoader` | –°–∫–∞–Ω–∏—Ä—É–µ—Ç –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä –∏–ª–∏ –≤–µ—Å—å DOM –∏ –∑–∞–ø—É—Å–∫–∞–µ—Ç –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã | `(root?: ParentNode) => void`                  |
| `bootComponent`      | –§–æ—Ä—Å–∏—Ä—É–µ—Ç –∑–∞–ø—É—Å–∫ –¥–ª—è –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–≥–æ —ç–ª–µ–º–µ–Ω—Ç–∞               | `(el: Element) => void`                        |

---

## üìö –¢–∏–ø—ã

```ts
export type ComponentModule =
  | ((el: Element) => void)
  | {
      display?: (el: Element) => void;
      boot?: (el: Element) => void;
      default?: (el: Element) => void;
    };

export type ComponentLoader = () => Promise<ComponentModule> | ComponentModule;
export type InitStrategy = 'immediate' | 'visible' | 'interaction';
```

---

## üõ† –ü—Ä–∏–º–µ—Ä –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞

```ts
// components/product-card.ts
export function display(el: Element) {
  el.innerHTML = '<button data-add>–î–æ–±–∞–≤–∏—Ç—å</button>';
}

export function boot(el: Element) {
  const btn = el.querySelector('[data-add]')!;
  btn.addEventListener('click', () => {
    console.log('–¢–æ–≤–∞—Ä –¥–æ–±–∞–≤–ª–µ–Ω –≤ –∫–æ—Ä–∑–∏–Ω—É');
  });
}
```

---

## üîÑ –°—Ç—Ä–∞—Ç–µ–≥–∏–∏ –∑–∞–ø—É—Å–∫–∞

* **`immediate`** ‚Äî –∑–∞–ø—É—Å–∫ —Å—Ä–∞–∑—É –ø–æ—Å–ª–µ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏.
* **`visible`** ‚Äî –∑–∞–ø—É—Å–∫ –ø—Ä–∏ –ø–æ—è–≤–ª–µ–Ω–∏–∏ —ç–ª–µ–º–µ–Ω—Ç–∞ –≤–æ –≤—å—é–ø–æ—Ä—Ç–µ (`IntersectionObserver`).
* **`interaction`** ‚Äî –∑–∞–ø—É—Å–∫ –ø—Ä–∏ –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è (click, focus –∏ —Ç.–¥.).

---

## üìÖ `hasDisplay`

–ï—Å–ª–∏ —Ö–æ—Ç–∏—Ç–µ —Å–Ω–∞—á–∞–ª–∞ –æ—Ç—Ä–µ–Ω–¥–µ—Ä–∏—Ç—å –±—ã—Å—Ç—Ä—ã–π —Å–∫–µ–ª–µ—Ç–æ–Ω/placeholder, –∞ —Ç—è–∂—ë–ª—É—é –ª–æ–≥–∏–∫—É –ø–æ–¥–∫–ª—é—á–∏—Ç—å –ø–æ–∑–∂–µ:

1. –ü—Ä–∏ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞ –≤—ã–∑—ã–≤–∞–µ—Ç—Å—è `display`.
2. –ü—Ä–∏ –Ω–∞—Å—Ç—É–ø–ª–µ–Ω–∏–∏ —É—Å–ª–æ–≤–∏—è –∑–∞–ø—É—Å–∫–∞ (`when`) –≤—ã–∑—ã–≤–∞–µ—Ç—Å—è `boot`.

---

## üèó –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –≤ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–µ

–ú–æ–∂–Ω–æ –æ–≥—Ä–∞–Ω–∏—á–∏—Ç—å –æ–±–ª–∞—Å—Ç—å –ø–æ–∏—Å–∫–∞ —ç–ª–µ–º–µ–Ω—Ç–æ–≤, –ø–µ—Ä–µ–¥–∞–≤ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä:

```ts
import { registerComponent, runComponentLoader } from '2mqjs/components';

registerComponent({
  name: 'product-card',
  load: () => import('./components/product-card'),
  when: 'visible',
  hasDisplay: true,
});

const container = document.querySelector('#products')!;
runComponentLoader(container);
```

---

## ü™µ –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ

–î–ª—è –æ—Ç–ª–∞–¥–∫–∏ –º–æ–∂–Ω–æ –≤–∫–ª—é—á–∏—Ç—å –ª–æ–≥–∏ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤:

```ts
import { setComponentsDebug } from '2mqjs/components';
setComponentsDebug(true);
```

–õ–æ–≥–∏ –±—É–¥—É—Ç —Å–æ–¥–µ—Ä–∂–∞—Ç—å –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏, –∑–∞–≥—Ä—É–∑–∫–µ –∏ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏ –∫–∞–∂–¥–æ–≥–æ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞.
